---
title: "Building an App for Mendix Workstation Client"
linktitle: "Building an App"
url: /mendix-workstation/build-app/
description: "Describes how to install the Workstation Connector and build an app to work with Mendix Workstation Client."
weight: 30
---

## Introduction

After you have [installed the Workstation Client](/mendix-workstation/installation/), you must either build a Mendix application that will send data or commands to your devices, or extend an existing app accordingly. In order to do that, you must download, install, and configure the [Mendix Workstation Connector](https://marketplace.mendix.com/link/component/247460) from the Mendix Marketplace.

### How the Connection Works

The Workstation Connector must authenticate itself to the Workstation Client so that the Client trusts the app using the Connector and establishes a connection. To achieve this, a key pair has to be generated by the Workstation Connector. The public key must be configured in the corresponding app in the Workstation Management. Workstation Client configuration must be up-to-date so that the public key can be verified.

The Workstation Connector establishes connection with the Device through the Workstation Client when it is needed. The connection is closed when it is not required anymore.

When a client browser or tab instance tries to connect to a device, previously connected browser or tab instances are disconnected from the device.

The Workstation Connector connects with Workstation Client using a local WebSocket on port 8094. Communication with each configured device uses another WebSocket on port 8095 for the first device, 8096 for the second, and so on, so that the range of ports used is port *8094* to *8094+n*, where *n* is the number of devices you have. Make sure that the Runtime or Admin port of your local development server in Studio Pro (**App Settings** > **Configurations** > **Server**) is not configured on a port greater or equal to 8094.  

## Prerequisites

* Mendix Workstation Client 3.0.0
* Mendix Studio Pro 9.24.11 or newer

## Installing and Configuring the Workstation Connector

To install and configure the Workstation Connector, perform the following steps:

1. Open an existing app to extend with Workstation functionality in Mendix Studio Pro, or create a new app.
2. Import the [Mendix Workstation Connector](https://marketplace.mendix.com/link/component/247460) from the Mendix Marketplace.
3. Configure the station in Workstation Management by performing the following steps:

    1. Navigate to the **Workspaces** page in [Workstation Management](https://workstation.home.mendix.com/).
    2. Click **Create Workspace**, or select an existing workspace from the overview.
    3. Click **Create Station**.
    4. Enter a name for the station and optionally select or create a group to categorize it, such as *Assembly*.
    5. Add devices in the **Devices** section.
    6. Click **Register Computer** to register your computer.
    7. Click **Download** to navigate to the Workstation Client listing in the Marketplace, download the Client installer for Windows, install it, and launch it.
    8. Copy the registration token and paste it into the [Workstation Client](/mendix-workstation/installation/) registration field.

4. Configure your app as an allowed app by performing the following steps:

    1. In your app go to [App Security](/refguide/app-security/#user-roles) and assign the module role **StationConnector.Administrator** to the Administrator user role.
    2. In your app add the page **StationConnector_Security** to your navigation or link to it from an **Open page** button. Alternatively, place the snippet **SNIPPET_StationAdminPage** on a page available to the Adminstrator user role.
    3. Run the app.
    4. Log in as an Administrator, navigate to the page you added in step 2 and copy the shown public key.
    5. Go back to the [Workstation Management](https://workstation.home.mendix.com/) and navigate to the workspace you created in step 3.2.
    6. Go to the **Apps** page in your workspace and click **Create App**.
    7. Enter your app's URL (for example, `http://localhost:8080`, which is the default when running an app locally) and paste the copied public key into the **Public Key** field.
    8. Perform one of the following actions:
        * To enable the app for all stations, select **Enable in all stations**
        * To enable it for a specific station, go to **Stations** and navigate to your station. You will find the created app under the **Apps** section. Here you can enable the application just for this station by pressing the toggle.
    9. Refresh the Workstation Client.
    10. Optional: To recreate the key pair, additionally assign the module role **StationConnector.SecurityAdministrator** to your Administrator role. This adds a **Regenerate KeyPair** button to the **StationConnector_Security** page. Use caution when using this button in a production scenario to avoid the need to reconfigure the app in the Management, and refresh all Workstation Clients.  

## Managing Apps

The app that you created in the previous section is available on the **Apps** page that you can access through the left navigation menu. To enable or disable the app for all your stations or groups of stations, click the icon in the right column of the app list, and then click **Manage App**.

## Managing Users

You can invite other Workstation Management users to your workspace to share configurations and collaborate. This feature requires a Workstation license.

To invite a user, click **Team** in the left navigation menu, then click **Invite Team Member**. Enter the user's email address and select a role. For more information about the available roles, see [Workspace Team and Collaboration](/mendix-workstation/installation/#collaboration).

To change a user's role or remove them from the workspace, click the three-dot icon in the right column of the user list. This action requires the Owner or Workspace Admin role.

## Getting Started with Custom Logic for Device Interaction

Now that you are ready to start using Mendix Workstation Client, you can implement your own custom logic for interacting with devices. The following nanoflows and Java actions are essential for establishing connections, sending or receiving messages, and managing device interactions:

* **GetStation** - Retrieves the computer information connected to the Client.
* **SendMessage** - Sends data or commands to the connected device. For more information about the supported message syntax, see [Message Syntax for File, Smart Card, and Bluetooth Devices](/mendix-workstation/device-syntax/).
* **SubscribeToMessages** - Subscribes to device messages and triggers a nanoflow when messages are received.
* **SubscribeToErrors** - Subscribes to device connection errors and triggers a nanoflow when errors occur.
* **Unsubscribe** - End the subscription to device messages or errors.
* **UnsubscribeByContext** - End all subscriptions related to a context object.
* **UnsubscribeByDevice** - End all subscriptions related to a specific device.
* **DisconnectDevice** - Unsubscribe and completely disconnect from a specific device.

These nanoflows and actions serve as the core building blocks for integrating devices into your Mendix applications and tailoring the functionality to your specific requirements.

### Understanding the Domain Model

The domain model contains the following entities:

* **Station** - Includes the station name, computer name, the workspace name and the client version (non-persistent entities).
* **Device** - A list of devices associated with the station; includes device names and properties required to achieve a connection (non-persistent entities).
* **AppKeyPair** - A persistent entity to store the app's key pair. The public key needs to be entered in the corresponding app in the Workstation Management. 

### Using the Nanoflows and Actions

The following section provides more information about using the nanoflows and Java actions in your Mendix application.

#### GetStation

Call `GetStation` to retrieve configuration of the current Client computer by using the Workstation Client. `GetStation` can be used multiple times, but it queries the Workstation Client only the first time. The following calls return the current object loaded in the session. If connection with Workstation Client does not work, `GetStation` returns an empty object.

#### SendMessage

Call `SendMessage` to send a message to a device. `SendMessage` includes the option to wait for the response of the device in the current nanoflow.

#### SubscribeToMessages

Call `SubscribeToMessages` to trigger a nanoflow when a message is received from a device. `SubscribeToMessages` provides an option to specify a context object that will be passed to the callback nanoflow whenever a message is received.

The callback nanoflow must have the following parameters: 

* `Device` (object) 
* `Message` (String)
* `Context object` (same as the name used when subscribing)

#### SubscribeToErrors

Call `SubscribeToErrors` to trigger a nanoflow on device connection error.

The callback nanoflow must have the following parameters: 

* `Device` (object) 
* `ErrorMessage` (String)
* `ErrorCode` (Integer)
* `Context object` (same as the name used when subscribing)

#### Unsubscribe

Call `Unsubscribe` to end a subscription.

#### UnsubscribeByContext

Call `UnsubscribeByContext` to end all subscriptions related to a context object.

## Error Logs

Logs for the Workstation Management, Client, and Connector are available in case of issues. For more information about accessing the logs, see [Troubleshooting Mendix Workstation Client](/mendix-workstation/troubleshooting/).
